/*! string2regex - v0.0.1 - 2014-10-20
* Copyright (c) 2014 ; Licensed  */
angular.module("string2regex",[]).value("groupColors",["#F5A9A9","#F3E2A9","#D0F5A9","#A9F5BC","#A9F5F2","#A9BCF5","#D0A9F5","#F5A9E1"]).controller("String2RegexCtrl",function(a,b){function c(a){var b=[];return a>="0"&&"9">=a&&b.push("number"),a>="a"&&"z">=a&&b.push("lowercase"),a>="A"&&"Z">=a&&b.push("uppercase"),(_.contains(b,"lowercase")||_.contains(b,"uppercase"))&&b.push("alphabet"),(_.contains(b,"alphabet")||_.contains(b,"number"))&&b.push("alphanumerical"),b.push(" "===a?"space":"nonspace"),_.contains(b,"alphanumerical")||_.contains(b,"space")||b.push("symbol"),b.push("any"),b}function d(a){for(var b=c(a[0]),d=1;d<a.length;d++){var e=c(a[d]);b=_.intersection(e,b)}return b}function e(a,b){if(void 0===b&&(b=0),a.length<=1)return[];for(var e=[],g=d(a),h=_.difference(c(a[0]),g),i=0,j="",k=1;k<a.length;k++){var l=(a[k],_.difference(c(a[k]),g));0===_.intersection(l,h).length?(j=a.substring(i,k),e.push(f(j,b)),h=l,i=k):h=_.intersection(l,h)}return 0===i?(console.log("Apparently same group"),[]):(j=a.substring(i,a.length),e.push(f(j,b)),e)}function f(a,b){void 0===b&&(b=0);var c={picked:!1,string:a,getSize:function(){return this.string.length},getGroupColor:function(){return g(this.depth)},commonClass:d(a,b),depth:b,selectedClass:"",hasSelected:function(){if(""!==this.selectedClass)return!0;var a=_.find(this.childs,function(a){return a.hasSelected()});return void 0!==a},ensureSelection:function(){_.any(this.childs,function(a){return a.hasSelected()})?(this.selectedClass="",_.each(this.childs,function(a){a.ensureSelection()})):this.selectedClass="any"},ensureNoSelection:function(){this.selectedClass="",_.each(this.childs,function(a){a.ensureNoSelection()})},select:function(a){this.ensureNoSelection(),this.selectedClass=a},childs:e(a,b+1)};return c}function g(a){return b[a%b.length]}var h=a.holder;a.getCharacterClass=c,a.getCommonCharacterClass=d,a.generateChildGroups=e,a.generateGroup=f,a.getColorForDepth=g,a.group=f(h.sample),a.group.ensureSelection()}).directive("string2regex",function(){return{scope:{holder:"=string2regex"},controller:"String2RegexCtrl",link:function(){},templateUrl:"string2regex-template.html"}}).directive("string2regexGroup",function(a){return{scope:{group:"=string2regexGroup"},link:function(){},compile:function(b){return a.compile(b)},templateUrl:"string2regex-template-group.html"}}).factory("RecursionHelper",["$compile",function(a){return{compile:function(b,c){angular.isFunction(c)&&(c={post:c});var d,e=b.contents().remove();return{pre:c&&c.pre?c.pre:null,post:function(b,f){d||(d=a(e)),d(b,function(a){f.append(a)}),c&&c.post&&c.post.apply(null,arguments)}}}}}]);